{% if product_results %} 
{% load product_first_image from product_images %}
{% load i18n %}
{% load prices_i18n %}
 <p class="text-muted text-size-small">
  {% if search_count %}   
   {{ search_count }} results of {{ products_count  }}
  {% endif %}
  </p>
<!-- output data -->
<div class="panel panel-default">
  <div class="panelbody">
   <div class='table-responsive'>
	<table class="table text-nowrap datatable-header-footer">
    <thead>
      <tr class="bg-primary">        
        <th>Product Name/sku</th>        
        <th>Buying Price</th>      
        <th>Retail price</th> 
        <th>Quantity</th>
        <th>Tax %</th> 
        <th>Variant</th>     
        <th class="text-center">Actions</th>
      </tr>
    </thead>
    <tfoot>
      <tr class="bg-primary">       
        <th>Product Name/sku</th> 
        <th>Buying Price</th>      
        <th>Retail price</th> 
        <th>Quantity</th> 
        <th>Tax %</th> 
        <th>Variant</th>    
        <th class="text-center">Actions</th>
      </tr>
    </tfoot>
    <tbody>
    {% for variant in product_results %}
    <tr>
    <!-- product name/sku -->    
	<td>
		<div class="media-left media-middle">
			<a href="#"><img src="assets/images/brands/bing.png" class="img-circle img-xs" alt="">#</a>
		</div>
		<div class="media-left">
			<div class=""><a href="#" class="text-default text-semibold"> {{ variant.display_product }} </a></div>
			<div class="text-muted text-size-small">	{{ variant.sku }}
			</div>
		</div>
	</td>
	<!-- Buying price  -->
	<td>
	 {% if variant.get_cost_price %}
	 {% gross variant.get_cost_price html=True %}
	 {% endif %}
	 </td>
	<!-- Retail price -->
	<td>
	<h6 class="text-semibold">
	{% if variant.price_override %}
	 {% gross variant.get_price_per_item html=True %}
	{% endif %}
	</h6>
	</td>
	<!-- quantity -->
	<td>
		<span class="text-muted">
		{{ variant.get_stock_quantity }}	
		</span>
	</td>
	<!-- product tax -->
	<td>
	<span class="text-warning">
	{% if variant.product.get_product_tax %}
	{{ variant.product.get_product_tax }}
	{% else %}
	<i class="icon-menu position-left"></i> 
	{% endif %}
	</span></td>
	
	<td>
    <!-- variant -->		
	{{ variant.display_variant }}	
	</td>
    {% if variant.get_stock_pk %}
	<td class='clickable-td' 
	data-href="{% url 'dashboard:product-stock-update' product_pk=variant.product.pk stock_pk=variant.get_stock_pk %}">
	{% else %}
	<td class='clickable-td' 
	data-href="{% url 'dashboard:product-stock-add' product_pk=variant.product.pk %}">
	{% endif %}
	<span class="label bg-success-400">Add stock
	</span>
			
	</td>
	
	</tr>
	{% endfor %}
	</tbody>
	</table>	
	</div>
	</div>
	<!-- / .table responsive -->
</div>
<style type="text/css">
	.clickable-td { cursor: pointer; }
</style>
<script type="text/javascript">
 $(document).ready(function() {

       $(".clickable-td").click(function() {

           window.location = $(this).data("href");

       });
    });	
</script>
{% else %}
 <div class="alert-warning" style="padding: 12px"><h5 class="text-center">No result matches your search <i class="icon-heart-broken2"></i></h5></div>
{% endif %}